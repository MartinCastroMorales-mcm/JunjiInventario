{% extends "layout.html" %}
{% block body %}

<div class="row">

    <div class="col-md-5">

<!-- esta seccion se utiliza para mostrar los errores a traves de flash siempre y cuando existan errores -->
{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}

<div class="custom-alert" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

{% endfor %}
{% endif %}
{% endwith %}
<!-- Se termina la seccion de errores -->

<!-- ----- -->
<div class="card card-body">
<form action="/add_Unidad" method="POST" class="mi-formulario">
    <div class="form-group">
        <label for="codigo_Unidad">ID de Unidad: </label>
        <input type="text" class="form-control" name="codigo_Unidad" placeholder="Unidad id">
        <br>
        <label for="nombreUnidad">Nombre de la Unidad: </label>
        <input type="text" class="form-control" name="nombreUnidad" placeholder="Nombre">
        <br>
        <label for="contactoUnidad">Contacto: </label>
        <input type="text" class="form-control" name="contactoUnidad" placeholder="Contacto">
        <br>
        <label for="direccionUnidad">Direccion: </label>
        <input type="text" class="form-control" name="direccionUnidad" placeholder="Direccion">
        <br>
        <label for="nombreComuna">Comuna: </label>
        <select class="form-select" aria-label="nombreComuna" name="idComuna">
            <option selected>Elija su Comuna</option>
            {% for comuna in comuna %}
                <option value="{{ comuna.idComuna }}">{{ comuna.nombreComuna }}</option>
            {% endfor %}
        </select>
</div>
    <button class="agregar-button"> Guardar</button>    
</form>
</div>
</div>
<h2>Unidad</h2>
<div style="overflow-x:auto;">
<table  id="posts"> 
    <thead>
        <tr>
            <td>Codigo Unidad</td>
            <td>Nombre Unidad</td>
            <td>Contacto</td>
            <td>Direccion</td>
            <td>Comuna</td>
            <td>Operations</td>
        </tr>
    </thead>
    <tbody>
        <!-- Se inicia iteracion for para mostrar todos los proveedores -->
        {% for ubi in Unidad %}
        <tr>
            <td>{{ubi.idUnidad}}</td>
            <td>{{ubi.nombreUnidad}}</td>
            <td>{{ubi.contactoUnidad}}</td>
            <td>{{ubi.direccionUnidad}}</td>
            {% if Unidad.idComuna == comuna.idComuna %}
                <td>{{ubi.nombreComuna}}</td>
            {% endif %}
            <td>
                <a href="/edit_Unidad/{{ubi.idUnidad}}"class= "success-button">Editar</a>
                <a href="/delete_Unidad/{{ubi.idUnidad}}"class= "delete-button">Eliminar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
